name: Zip from content

on:
  workflow_dispatch:
    inputs:
      content1:
        description: 'Contenuto del file uno'
        required: true
      name1:
        description: 'Nome del file uno con estensione (es: Manifest.xml)'
        required: true
      content2:
        description: 'Contenuto del file due'
        required: true
      name2:
        description: 'Nome del file due con estensione (es: PackageHeader.xml)'
        required: true
      content3:
        description: 'Contenuto del file tre'
        required: true
      name3:
        description: 'Nome del file tre con estensione (es: Al1PackingPreparationEntity.xml)'
        required: true
      zipname:
        description: 'Nome del file zip (senza estensione)'
        required: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Create file1
        run: |
          cat <<'EOF' > "${{ github.event.inputs.name1 }}"
          ${{ github.event.inputs.content1 }}
          EOF

      - name: Create file2
        run: |
          cat <<'EOF' > "${{ github.event.inputs.name2 }}"
          ${{ github.event.inputs.content2 }}
          EOF

      - name: Create file3
        run: |
          cat <<'EOF' > "${{ github.event.inputs.name3 }}"
          ${{ github.event.inputs.content3 }}
          EOF

      - name: Crea zip
        run: zip -j "${{ github.event.inputs.zipname }}.zip" \
                  "${{ github.event.inputs.name1 }}" \
                  "${{ github.event.inputs.name2 }}" \
                  "${{ github.event.inputs.name3 }}"

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: ${{ github.event.inputs.zipname }}
          path: ${{ github.event.inputs.zipname }}.zip
